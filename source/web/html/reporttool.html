<!-- 管理员列表 -->

<!-- Content Header -->
<section class="content-header">
    <h1>
    	报表工具
    </h1>
    <ol class="breadcrumb">
    	<li><a href="index.html"><i class="fa fa-dashboard"></i> 首页</a></li>
    	<li><a href="#">系统管理</a></li>
    	<li class="active">报表工具</li>
    </ol>
</section>
<!-- /Content Header -->

<!-- Main content -->
<section class="content">
	<div class="box">
        <div class="box-header">
            <h3 class="box-title">报表工具</h3>
            <div class="box-tools">
    			<span class="pull-left span-lh">工具代码</span>
            	<div class="input-group pull-left">
      				<input type="text" class="form-control input-sm" placeholder="工具代码"/>
    			</div>
    			<span class="pull-left span-lh">工具名称</span>
            	<div class="input-group pull-left">
      				<input type="text" class="form-control input-sm" placeholder="工具名称"/>
    			</div>
    			<span class="pull-left span-lh">工具类型</span>
    			<div class="input-group pull-left">
      				<select class="form-control select-sm">
						<option value="选择" selected="selected" disabled="disabled">选择</option>
						<option value="">BO</option>
						<option value="">Tableau</option>
						<option value="">QlikView</option>
					</select>
    			</div>
    			<div class="pull-right">
    				<a href="#" class="btn btn-default btn-sm">
                		<i class="fa fa-search"></i> 检索
                	</a>
    				<a href="#" class="btn btn-default btn-sm" data-toggle="modal" data-target="#adminModal">
                		<i class="fa fa-plus-circle"></i> 新增
                	</a>
    			</div>
            </div>
        </div>
    	<div class="box-body no-padding">
      		<table class="table table-striped">
        		<tbody>
        			<tr>
                        <th>工具代码</th>
                        <th>工具名称</th>
                        <th>工具类型</th>
                        <th>工具版本</th>
                        <th>展现方式</th>
                        <th>创建时间</th>
                        <th>操作</th>
                    </tr>
        			<tr>
                      	<td>001</td>
                      	<td>工具名称1</td>
                      	<td>BO</td>
                      	<td>V1.0</td>
                      	<td>Tab</td>
                      	<td>2016-02-21</td>
                        <td>
                        	<a href="#" title="编辑" data-toggle="modal" data-target="#adminModal"><i class="fa fa-edit"></i></a>
                        	<a href="#" title="删除" data-toggle="modal" data-target="#deleteModal"><i class="fa fa-remove"></i></a>
                        </td>
        			</tr>
        			<tr>
                      	<td>002</td>
                      	<td>工具名称2</td>
                      	<td>Tableau</td>
                      	<td>V1.0</td>
                      	<td>Tab</td>
                      	<td>2016-02-21</td>
                        <td>
                        	<a href="#" title="编辑" data-toggle="modal" data-target="#adminModal"><i class="fa fa-edit"></i></a>
                        	<a href="#" title="删除" data-toggle="modal" data-target="#deleteModal"><i class="fa fa-remove"></i></a>
                        </td>
        			</tr>
        			</tr>
        			<tr>
                      	<td>003</td>
                      	<td>工具名称3</td>
                      	<td>QlikView</td>
                      	<td>V1.0</td>
                      	<td>Tab</td>
                      	<td>2016-02-21</td>
                        <td>
                        	<a href="#" title="编辑" data-toggle="modal" data-target="#adminModal"><i class="fa fa-edit"></i></a>
                        	<a href="#" title="删除" data-toggle="modal" data-target="#deleteModal"><i class="fa fa-remove"></i></a>
                        </td>
        			</tr>
      			</tbody>
      		</table>
    	</div>
    	<div class="box-footer clearfix">
    		<p class="pull-left">
    			共<span>52</span>条记录，
    			共<span>6</span>页
    		</p>
            <ul class="pagination pagination-sm no-margin pull-right">
            	<li><a href="#">«</a></li>
            	<li><a href="#">1</a></li>
            	<li><a href="#">2</a></li>
            	<li><a href="#">3</a></li>
            	<li><a href="#">»</a></li>
            </ul>
        </div>
	</div>
</section>
<!-- Main content -->

<!-- Modals -->
<div class="modal fade" id="adminModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">报表工具-新增/编辑</h4>
            </div>
            <div class="modal-body">
            	 <form id="reporttool" method="post">
            	<div class="row">
            		<div class="col-md-6">
            			<div class="form-group">
            				<label>工具代码</label>
            				<input type="text" class="form-control" name="toolcode" placeholder="工具代码" />
            			</div>
            		</div>
            		<div class="col-md-6">
            			<div class="form-group">
            				<label>工具名称</label>
            				<input type="text" class="form-control" name="toolname" placeholder="工具名称"/>
            			</div>
            		</div>
            	</div>
            	<div class="row">
            		<div class="col-md-6">
            			<div class="form-group">
            				<label>工具类型</label>
            				<select class="form-control">
            					<option value="选择" disabled="disabled" selected="selected">选择</option>
            					<option value="BO">BO</option>
            					<option value="Tableau">Tableau</option>
            					<option value="QlikView">QlikView</option>
            				</select>
            			</div>
            		</div>
            		<div class="col-md-6">
            			<div class="form-group modal-select">
            				<label>工具版本</label>
            				<select class="form-control">
            					<option value="选择" disabled="disabled" selected="selected">选择</option>
            					<option value="V1.0">V1.0</option>
            					<option value="V2.0">V2.0</option>
            				</select>
            			</div>
            		</div>
            	</div>
            	<div class="row">
            		<div class="col-md-6">
            			<div class="form-group">
            				<label>展现方式</label>
            				<select class="form-control">
            					<option value="选择">选择</option>
            					<option value="Tab">Tab</option>
            					<option value="Windows">Windows</option>
            				</select>
            			</div>
            		</div>
            	</div>
            	</form>
            </div>
            <div class="modal-footer">
            	<button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>
            	<button type="button" class="btn btn-preserve">保存</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="deleteModal">
	 <div class="modal-dialog prompt">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
            	<h4 class="modal-title">&nbsp;</h4>
            </div>
            <div class="modal-body">
                <p class="delete-sure">确认删除该项？</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-preserve">确认</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!-- /Modals -->
		
<script type="text/javascript">
	$(function() {
		//获取选中的节点Id
		$("#saveBtn").on("click", function(e) {
			e.preventDefault();
			var zTreeObj = $.fn.zTree.getZTreeObj("roleTree");
			var selectedNodes = zTreeObj.getCheckedNodes(true);
			var selectedIds = [];
			$.each(selectedNodes, function(i, el) {
				selectedIds.push(el.id);
			});
			//console.log("Selected: ", selectedIds);
		});
		
		//初始化下拉树形结构
		var selNodes = [
			{id:1, pId:0, name:"业务1", open:true, nocheck:true},
			{id:11, pId:1, name:"子业务1"},
			{id:12, pId:1, name:"子业务1"},
			{id:13, pId:1, name:"子业务1"},
			{id:14, pId:1, name:"子业务1"}
		];
		$.fn.zTree.init($("#selTree"), {
			data: {
				simpleData: {enable:true, idKey:"id", pIdKey:"pId", rootPId:0}
			},
			check: {enable:true, chkboxType:{"Y":"", "N":""}},
			view: {showIcon:false, dblClickExpand:false},
			callback: {
				onCheck: function(e, treeId, treeNode) {
					var zTree = $.fn.zTree.getZTreeObj("selTree"),
					nodes = zTree.getCheckedNodes(true),
					v = "";
					for(var i=0, l=nodes.length; i<l; i++) {
						v += nodes[i].name + ",";
					}
					if(v.length > 0) {
						v = v.substring(0, v.length-1);
					};
					$("#selInput").val(v);
				}
			}
		}, selNodes);
		//弹出树形下拉选择框
		$("#selInput").on("click", function(e) {
			e.stopPropagation();
			$("#selDiv").slideDown();
		});
		//隐藏树形下拉选择框
		$("body").on("click", function() {
			$("#selDiv").slideUp();
		});
		$("#selDiv").on("click", function(e) {
			e.stopPropagation();
		});
//		模糊查询
		$(".higher-level,.higher-level1").select2({
			 placeholder: "选择上级类别",
 			 allowClear: true,
 			 width:"100%"
		});	
//表单验证
$('#reporttool').bootstrapValidator({
		message: '值不能为空',
        feedbackIcons: {
            valid: 'glyphicon glyphicon-ok',
            invalid: 'glyphicon glyphicon-remove',
            validating: 'glyphicon glyphicon-refresh'
        },
         fields: {
            toolcode: {
            	message: '值不能为空',
                validators: {
                    notEmpty: {
                        message: '工具代码值不能为空'
                    },
                   regexp: {
                        regexp: /^[a-zA-Z0-9]+$/,
                        message: '工具代码值只能包括字母、数字'
                    }
                }
            },
             toolname: {
                message: '值不能为空',
                validators: {
                    notEmpty: {
                        message: '工具名称值不能为空'
                    }
                }
            },
           }
    });
	});
</script>