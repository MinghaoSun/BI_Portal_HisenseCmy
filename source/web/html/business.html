<!-- 管理员列表 -->

<!-- Content Header -->
<section class="content-header">
    <h1>
    	业务管理
    </h1>
    <ol class="breadcrumb">
    	<li><a href="index.html"><i class="fa fa-dashboard"></i> 首页</a></li>
    	<li><a href="#">系统管理</a></li>
    	<li class="active">业务管理</li>
    </ol>
</section>
<!-- /Content Header -->

<!-- Main content -->
<section class="content">
	<div class="box">
        <div class="box-header">
            <h3 class="box-title">业务列表</h3>
            <div class="box-tools">
            	<span class="pull-left span-lh">业务代码</span>
            	<div class="input-group pull-left">
      				<input type="text" class="form-control input-sm" placeholder="业务代码"/>
    			</div>
    			<span class="pull-left span-lh">业务名称</span>
            	<div class="input-group pull-left">
      				<input type="text" class="form-control input-sm" placeholder="业务名称" />
    			</div>
    			<span class="pull-left span-lh">产品分类</span>
            	<div class="input-group pull-left">
      				<select class="form-control select-sm">
						<option value="产品分类1">产品分类1</option>
						<option value="产品分类2">产品分类2</option>
					</select>
    			</div>
    			<span class="pull-left span-lh">上级类别</span>
            	<div class="input-group pull-left out-select">
					<select class="higher-level">
						<option value=""></option>
						<option value="类别1">类别1</option>
						<option value="类别2">类别2</option>
						<option value="类别3">类别3</option>
					</select>
    			</div>
    			<div class="pull-right">
    				<a href="#" class="btn btn-default btn-sm">
                		<i class="fa fa-search"></i> 检索
                	</a>
    				<a href="#" class="btn btn-default btn-sm" data-toggle="modal" data-target="#adminModal">
                		<i class="fa fa-plus-circle"></i> 新增
                	</a>
    			</div>
            </div>
        </div>
    	<div class="box-body no-padding">
      		<table class="table table-striped">
        		<tbody>
        			<tr>
                        <th>业务代码</th>
                        <th>业务名称</th>
                        <th>产品分类</th>
                        <th>上级类别</th>
                        <th>创建用户</th>
                        <th>创建时间</th>
                        <th>操作</th>
                    </tr>
        			<tr>
                      	<td>001</td>
                      	<td>业务1</td>
                      	<td>1</td>
                      	<td>业务</td>
                      	<td>zhangsan</td>
                      	<td>2016-02-21</td>
                        <td>
                        	<a href="#" title="编辑" data-toggle="modal" data-target="#adminModal"><i class="fa fa-edit"></i></a>
                        	<a href="#" title="删除" data-toggle="modal" data-target="#deleteModal"><i class="fa fa-remove"></i></a>
                        </td>
        			</tr>
        			<tr>
                      	<td>002</td>
                      	<td>业务1</td>
                      	<td>2</td>
                      	<td>业务</td>
                      	<td>zhangsan</td>
                      	<td>2016-02-21</td>
                        <td>
                        	<a href="#" title="编辑" data-toggle="modal" data-target="#adminModal"><i class="fa fa-edit"></i></a>
                        	<a href="#" title="删除" data-toggle="modal" data-target="#deleteModal"><i class="fa fa-remove"></i></a>
                        </td>
        			</tr>
        			<tr>
                      	<td>003</td>
                      	<td>业务1</td>
                      	<td>3</td>
                      	<td>业务</td>
                      	<td>zhangsan</td>
                      	<td>2016-02-21</td>
                        <td>
                        	<a href="#" title="编辑" data-toggle="modal" data-target="#adminModal"><i class="fa fa-edit"></i></a>
                        	<a href="#" title="删除" data-toggle="modal" data-target="#deleteModal"><i class="fa fa-remove"></i></a>
                        </td>
        			</tr>
        			<tr>
                      	<td>004</td>
                      	<td>业务1</td>
                      	<td>4</td>
                      	<td>业务</td>
                      	<td>zhangsan</td>
                      	<td>2016-02-21</td>
                        <td>
                        	<a href="#" title="编辑" data-toggle="modal" data-target="#adminModal"><i class="fa fa-edit"></i></a>
                        	<a href="#" title="删除" data-toggle="modal" data-target="#deleteModal"><i class="fa fa-remove"></i></a>
                        </td>
        			</tr>
      			</tbody>
      		</table>
    	</div>
    	<div class="box-footer clearfix">
    		<p class="pull-left">
    			共<span>52</span>条记录，
    			共<span>6</span>页
    		</p>
            <ul class="pagination pagination-sm no-margin pull-right">
            	<li><a href="#">«</a></li>
            	<li><a href="#">1</a></li>
            	<li><a href="#">2</a></li>
            	<li><a href="#">3</a></li>
            	<li><a href="#">»</a></li>
            </ul>
        </div>
	</div>
</section>
<!-- Main content -->

<!-- Modals -->
<div class="modal fade" id="adminModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">业务分类-新增/编辑</h4>
            </div>
            <div class="modal-body">
            	<div class="row">
            		<div class="col-md-6">
            			<div class="form-group">
            				<label>业务代码</label>
            				<input type="text" class="form-control" />
            			</div>
            		</div>
            		<div class="col-md-6">
            			<div class="form-group">
            				<label>业务名称</label>
            				<input type="text" class="form-control" />
            			</div>
            		</div>
            	</div>
            	<div class="row">
            		<div class="col-md-6">
            			<div class="form-group">
            				<label>产品分类</label>
            				<select class="form-control">
            					<option value="选择">选择</option>
            					<option value="选项一">选项一</option>
            					<option value="选项二">选项二</option>
            				</select>
            			</div>
            		</div>
            		<div class="col-md-6">
            			<div class="form-group modal-select">
            				<label>上级类别</label>
            				<select class="higher-level1">
								<option value=""></option>
								<option value="类别1">类别1</option>
							</select>
            			</div>
            		</div>
            	</div>
            </div>
            <div class="modal-footer">
            	<button type="button" class="btn btn-default pull-left" data-dismiss="modal">取消</button>
            	<button type="button" class="btn btn-preserve">保存</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="deleteModal">
	 <div class="modal-dialog prompt">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
            	<h4 class="modal-title">&nbsp;</h4>
            </div>
            <div class="modal-body">
                <p class="delete-sure">确认删除该项？</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-preserve">确认</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!-- /Modals -->
		
<script type="text/javascript">
	$(function() {
		//获取选中的节点Id
		$("#saveBtn").on("click", function(e) {
			e.preventDefault();
			var zTreeObj = $.fn.zTree.getZTreeObj("roleTree");
			var selectedNodes = zTreeObj.getCheckedNodes(true);
			var selectedIds = [];
			$.each(selectedNodes, function(i, el) {
				selectedIds.push(el.id);
			});
			//console.log("Selected: ", selectedIds);
		});
		
		//初始化下拉树形结构
		var selNodes = [
			{id:1, pId:0, name:"业务1", open:true, nocheck:true},
			{id:11, pId:1, name:"子业务1"},
			{id:12, pId:1, name:"子业务1"},
			{id:13, pId:1, name:"子业务1"},
			{id:14, pId:1, name:"子业务1"}
		];
		$.fn.zTree.init($("#selTree"), {
			data: {
				simpleData: {enable:true, idKey:"id", pIdKey:"pId", rootPId:0}
			},
			check: {enable:true, chkboxType:{"Y":"", "N":""}},
			view: {showIcon:false, dblClickExpand:false},
			callback: {
				onCheck: function(e, treeId, treeNode) {
					var zTree = $.fn.zTree.getZTreeObj("selTree"),
					nodes = zTree.getCheckedNodes(true),
					v = "";
					for(var i=0, l=nodes.length; i<l; i++) {
						v += nodes[i].name + ",";
					}
					if(v.length > 0) {
						v = v.substring(0, v.length-1);
					};
					$("#selInput").val(v);
				}
			}
		}, selNodes);
		//弹出树形下拉选择框
		$("#selInput").on("click", function(e) {
			e.stopPropagation();
			$("#selDiv").slideDown();
		});
		//隐藏树形下拉选择框
		$("body").on("click", function() {
			$("#selDiv").slideUp();
		});
		$("#selDiv").on("click", function(e) {
			e.stopPropagation();
		});
//		模糊查询
		$(".higher-level,.higher-level1").select2({
			 placeholder: "选择上级类别",
 			 allowClear: true,
 			 width:"100%"
		});	

	});
</script>